<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Serif+Text:ital@0;1&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
        <link rel="Icon" href="https://media.istockphoto.com/id/2108823768/vector/all-national-flags-of-the-world-round-shape-with-shadow-flag-isolated-on-white-background.jpg?s=612x612&w=0&k=20&c=0mMScn_UYif4eVxMECrKG8juUcKSTnObusN8yd8yHz4=">
		<link href="Challanges-output.css" rel="stylesheet" />
		<link href="challanges.css" rel="stylesheet" />
        <!-- <link href="loading.css" rel="stylesheet" /> -->
		<title>Country Challenge</title>
	</head>
	<body>
		<!-- PopUp starts -->
		<div class="bg-black w-full h-screen fixed" id="pop_div_holder">
			<div class="fixed h-96 w-96 text-white flex justify-evenly items-center flex-col pop-up-div">
                <p class="text-2xl font-semibold sail-regular" id="Country-Capital-Challange">Country's Capital Challange</p>
				<p class="text-md font-semibold bebas-neue-regular">Choose Level To Start</p>
				<div class="w-full bg-slate-800 flex justify-evenly gap-1 h-auto flex-wrap sm:flex-nowrap sm:justify-center sm:space-x-4 p-2">
					<button class="font-semibold transition-all ease-linear hover:text-green-900 text-green-500 uppercase" onclick="challenge_level(this.id)" id="easy">Easy </button>
					<button class="font-semibold transition-all ease-linear hover:text-yellow-900 text-yellow-500 uppercase" onclick="challenge_level(this.id)" id="medium">medium </button>
					<button class="font-semibold transition-all ease-linear hover:text-red-900 text-red-500 uppercase" onclick="challenge_level(this.id)" id="hard">Hard </button>
					<button class="font-semibold transition-all ease-linear hover:text-purple-900 text-purple-500 uppercase" onclick="challenge_level(this.id)" id="impossible">Impossible </button>
				</div>
			</div>
		</div>
		<!-- PopUp ends -->

		<!-- Count Down starts -->
		<div class="countdown h-screen w-full" id="countdown">
			<span id="countdown-text"></span>
		</div>
		<!-- Count Down ends -->

        <!--main section starts-->
		<section class="bg-white w-full h-screen flex items-center flex-col justify-center main-container-challenges">

			<div class="fixed top-0 pl-5 pr-5 bg-transparent rounded-lg flex-wrap justify-between items-center hidden w-1/2 max-w-md min-w-96 min-h-11 h-auto" id="rules-div">
                <p class="text-black text-xl font-semibold ">Roles:</p>
                <p class="text-green-500 font-extrabold text-lg">Correct: +1</p>
                <p class="text-red-500 font-extrabold text-lg">False: -1</p>
            </div>

			<div class="question-div hidden items-center justify-center flex-col relative">
                <p class="absolute top-5 text-3xl uppercase block text-cyan-200" id="level-text-p"><b>Level: </b>Medium</p>
                <p class="absolute left-2 bottom-1 text-white" id="total_points"></p>
                <p class="absolute right-2 bottom-1 text-2xl font-mono text-white" id="timer"></p>
				<p class="text-3xl capitalize" id="What-is-the-Capital-of">What is the Capital of </p>
				<p class="text-2xl capitalize font-bold text-white" id="country_text_changer"></p>
			</div>

			<div class="bg-slate-300 answer-div hidden items-center flex-col ">
                <div class="flex bg-transparent w-full justify-evenly items-center mt-20 relative btnholder">
                    <button class="dm-serif-text-regular text-white h-10 w-auto text-xl capitalize rounded-md p-1 border-none outline-none hover:opacity-50 transition-all ease-linear active:bg-black answer-button" id="btns"></button>
                    <button class="dm-serif-text-regular text-white h-10 w-auto text-xl capitalize rounded-md p-1 border-none outline-none hover:opacity-50 transition-all ease-linear active:bg-black answer-button" id="btns"></button>
                    <button class="dm-serif-text-regular text-white h-10 w-auto text-xl capitalize rounded-md p-1 border-none outline-none hover:opacity-50 transition-all ease-linear active:bg-black answer-button" id="btns"></button>
                </div>
                <div class="flex w-auto bg-transparent min-h-8 h-auto flex-wrap justify-start items-center self-start ml-2 mt-20" id="true-wrong-unsure-divs-holder">
                </div>
            </div>

		</section>
        <!--main section ends-->

        <!-- loading starts -->
        <!-- <div class="dot-spinner">
            <div class="dot-spinner__dot"></div>
            <div class="dot-spinner__dot"></div>
            <div class="dot-spinner__dot"></div>
            <div class="dot-spinner__dot"></div>
            <div class="dot-spinner__dot"></div>
            <div class="dot-spinner__dot"></div>
            <div class="dot-spinner__dot"></div>
            <div class="dot-spinner__dot"></div>
        </div> -->
        <!-- loading ends -->
		<script src="challenges.js"></script>
	</body>
</html>
<!--const pop_div_holder1 = document.getElementById("pop_div_holder1");
const countdown = document.getElementById("countdown");
const main_container_challenges = document.querySelector(".main-container-challenges");
const level_text_p = document.getElementById("level-text-p");
const rules_div = document.getElementById("rules-div");
const question_div = document.querySelector(".question-div");
const answer_div = document.querySelector(".answer-div");
const country_text_changer = document.getElementById("country_text_changer");
let true_wrong_divs_holder = document.getElementById("true-wrong-unsure-divs-holder");
const total_points = document.getElementById("total_points");
let pop_div_holder = document.getElementById("pop_div_holder");
let end_correct_answer_counter_value = JSON.parse(localStorage.getItem("end_correct_answer_counter_value"))? JSON.parse(localStorage.getItem("end_correct_answer_counter_value")): 0;
let end_wrong_answer_counter_value = JSON.parse(localStorage.getItem("end_wrong_answer_counter_value"))? JSON.parse(localStorage.getItem("end_wrong_answer_counter_value")): 0;
let total = JSON.parse(localStorage.getItem("pointGathered"))? JSON.parse(localStorage.getItem("pointGathered")): 0;
const buttons = document.querySelectorAll(".answer-button");
const stopWatch = document.getElementById("timer");
let flowover = true;

function challenge_level(id) {
	document.getElementById("pop_div_holder").style.display = "none";
	countdown.style.display = "flex";
	setTimeout(updateCountdown, 1000);
	level_text_p.innerHTML = `<b>Level: </b>${id}`;
	if (id === "easy") {
		quizFunc(id);
		timer(7);
	} else if (id === "medium") {
		quizFunc(id);
		timer(66);
	} else if (id === "hard") {
		quizFunc(id);
		timer(102);
	} else if (id === "impossible") {
		quizFunc(id);
		timer(132);
	}
}

/*main functions starts*/
async function quizFunc(level) {
	if (flowover) {
		const defaultArray = Array.from({ length: 29 }, (_, i) => i);

		let arrayNumbers = JSON.parse(localStorage.getItem("updatedArray")) || defaultArray;
		const randomIndex = Math.floor(Math.random() * arrayNumbers.length);
		const randomNumber = arrayNumbers[randomIndex];
		arrayNumbers.splice(randomIndex, 1);
		localStorage.setItem("updatedArray", JSON.stringify(arrayNumbers));

		const response = await fetch(`./${level}.json`);
		const data = await response.json();
		const correctAnswer = data[randomNumber].capital;
		country_text_changer.innerHTML = data[randomNumber].country;

		const wrongAnswers = data
			.filter(item => item.capital !== correctAnswer)
			.map(item => item.capital)
			.slice(0, 6);
		const wrongOptions = wrongAnswers.sort(() => Math.random() - 0.5).slice(0, 2);

		const answers = [correctAnswer, ...wrongOptions].sort(() => Math.random() - 0.5);

		buttons.forEach((button, index) => {
			button.innerHTML = answers[index];
			button.onclick = () => {
				if (button.innerHTML === correctAnswer) {
					true_wrong_divs_holder.innerHTML += `<div class="bg-green-500 h-5 w-5 rounded-full m-1 text-center text-sm font-bold">+1</div>`;
					total++;
					end_correct_answer_counter_value++;
					localStorage.setItem("end_correct_answer_counter_value", JSON.stringify(end_correct_answer_counter_value));
				} else {
					true_wrong_divs_holder.innerHTML += `<div class="bg-red-500 h-5 w-5 rounded-full m-1 text-center text-sm font-bold">-1</div>`;
					total--;
					end_wrong_answer_counter_value++;
					localStorage.setItem("end_wrong_answer_counter_value", JSON.stringify(end_wrong_answer_counter_value));
				}
				total_points.innerHTML = `<b>${total} Points</b>`;
				localStorage.setItem("pointGathered", JSON.stringify(total));
				console.log(level)
				checkEndCondition(arrayNumbers,level);
				quizFunc(level);
			};
		});
	}
}
/*main functions ends*/

/*end popUp starts */
function checkEndCondition(arrayNumbers = [],level) {
	console.log(level)
	if (
		arrayNumbers.length === 0 ||
		stopWatch.innerHTML === "<b>Time's up!</b>"
	) {
		flowover = false;
		level_text_p.style.display = "none";
		rules_div.style.display = "none";
		question_div.style.display = "none";
		answer_div.style.display = "none";
		total_points.innerHTML = `${total}<b> Points</b>`;
		buttons.forEach((button) => {
			button.style.display = "none";
		});

		pop_div_holder.style.display = "block";
		pop_div_holder.innerHTML = `
			<div class="fixed h-96 w-96 text-white flex justify-evenly items-center flex-col pop-up-div">
				<p class="text-3xl font-bold uppercase font-rubic-scribble congratulations">congratulations</p>
				<p class="capitalize">Level: ${level}</p>
				<div class="w-full bg-transparent flex justify-evenly h-72 flex-col  relative  items-center">
					<p class="text-xl font-dm-serif font-semibold text-slate-300" id="end_answer_counter">Your Score Is: ${total}</p>
					<p class="text-xl font-dm-serif font-semibold text-green-700" id="end_correct_answer_counter">Correct Answers: ${end_correct_answer_counter_value} </p>
					<p class="text-xl font-dm-serif font-semibold text-red-700" id="end_wrong_answer_counter">Wrong Answers: ${end_wrong_answer_counter_value}</p>
					<i class="material-symbols-outlined fixed right-3 bottom-6 cursor-pointer" id="repeat_the_game" onclick="repeatTheGame()">
						replay
					</i>
				</div>
			</div>
		`;
	}
}
/*end popUp starts */



/*animation 3,2,1 starts*/
const countdownText = document.getElementById("countdown-text");
const countdownNumbers = ["Ready!", "Steady!", "Go!", "NaN"];

let index = 0;
function updateCountdown() {
	countdownText.innerText = countdownNumbers[index];

	// Restart the animation
	countdownText.style.animation = "none";
	countdownText.offsetHeight;
	countdownText.style.animation = "";

	index++;
	if (index < countdownNumbers.length) {
		setTimeout(updateCountdown, 2000);
	} else {
		countdown.style.display = "none";
		level_text_p.style.display = "block";
		rules_div.style.display = "flex";
		question_div.style.display = "flex";
		answer_div.style.display = "flex";
	}
}
/*animation 3,2,1 ends*/



/*timer starts */
function timer(cooo) {
	let timeLeft = cooo;

	const intervalId = setInterval(() => {
		stopWatch.innerHTML = `${timeLeft}<b>s Time Left</b>`;
		timeLeft--;

		if (timeLeft < 0) {
			clearInterval(intervalId);
			stopWatch.innerHTML = `<b class="bebas-neue-regular">Time Left</b>`;
			checkEndCondition([]);
		}
	}, 1000);
}
/*timer ends */

/*repeat the game starts */
function repeatTheGame() {
	window.location.reload();
	localStorage.clear();
	pop_div_holder.innerHTML = `
            <div class="fixed h-96 w-96 text-white flex justify-evenly items-center flex-col pop-up-div">
				<p class="text-xl font-semibold">Choose Level To Start Challanges</p>
				<div class="w-full bg-slate-800 flex justify-evenly h-10">
					<button class="font-semibold transition-all ease-linear hover:text-green-900 text-green-500 uppercase" onclick="challenge_level(this.id)" id="easy">Easy </button>
					<button class="font-semibold transition-all ease-linear hover:text-yellow-900 text-yellow-500 uppercase" onclick="challenge_level(this.id)" id="medium">medium </button>
					<button class="font-semibold transition-all ease-linear hover:text-red-900 text-red-500 uppercase" onclick="challenge_level(this.id)" id="hard">Hard </button>
					<button class="font-semibold transition-all ease-linear hover:text-purple-900 text-purple-500 uppercase" onclick="challenge_level(this.id)" id="impossible">Impossible </button>
				</div>
			</div>
    `;
}
/*repeat the game ends */


window.onload = () => {
	localStorage.clear();
};
-->
